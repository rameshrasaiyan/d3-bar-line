function type(t){return t.age=+t.age,t}var margin={top:20,right:30,bottom:30,left:40},width=960-margin.left-margin.right,height=500-margin.top-margin.bottom,x=d3.scale.ordinal().rangeRoundBands([0,width],.1),y=d3.scale.linear().range([height,0]),color=d3.scale.category10(),chart=d3.select("#chart-container").append("svg").attr("width",width+2*margin.left+margin.right).attr("height",height+margin.top+margin.bottom),xAxis=d3.svg.axis().scale(x).orient("bottom"),yAxis=d3.svg.axis().scale(y).orient("left");d3.json("data.json",function(t,a){x.domain(a.map(function(t){return t.personName})),y.domain([0,d3.max(a,function(t){return t.age})]);var r=chart.selectAll("g").data(a).enter().append("g").attr("transform",function(t,a){return"translate("+x(t.personName)+", 0)"}),n=d3.svg.line().x(function(t,a){return x(a)}).y(function(t){return y(t.age)});r.append("rect").attr("y",function(t){return y(t.age)}).attr("x",function(t,a){return x.rangeBand()+margin.left/4}).attr("height",function(t){return height-y(t.age)}).attr("width",x.rangeBand()).attr("fill",function(t,a){return color(a)}),r.append("text").attr("x",x.rangeBand()+margin.left).attr("y",function(t){return y(t.age)-10}).attr("dy",".75em").text(function(t){return t.age}),chart.append("g").attr("class","x axis").attr("transform","translate("+margin.left+","+height+")").call(xAxis),chart.append("line").attr("d",n(a)),chart.append("g").attr("class","y axis").attr("transform","translate("+margin.left+",0)").call(yAxis).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Age")});